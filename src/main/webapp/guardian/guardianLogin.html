<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Guardian</title>
<link rel="stylesheet" href="../assets/css/login.css">
<link rel="icon" type="image/webp" href="../assets/image/sksmLOGO.webp">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link
	href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
	rel="stylesheet">
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

	<div class="container">

		<div class="left-panel">
			<p>
				<a class="home-link" href="../choice.html">‚Üê Back to Selection</a>
			</p>

			<div class="title-logo">
				<span class="system-title">Smart School System</span> <img
					src="../assets/image/sksmLOGO.webp" alt="School Logo"
					class="school-logo">
			</div>

			<p class="welcome-text">Greetings, Guardian!</p>
		</div>

		<div class="login-box">
			<h2>Log in to Smart School System</h2>

			<form action="../GuardianLoginServlet" method="POST">

				<input type="hidden" name="role" value="teacher">

				<div class="input-group">
                    <input type="email" id="email" name="email" placeholder="Enter your email" required 
                           style="width: 100%; box-sizing: border-box;">
				</div>

				<div class="input-group password-group" style="margin-bottom: 0;">
                    <input type="password" name="password" id="password"
						placeholder="Enter your password" required 
                        style="width: 100%; box-sizing: border-box;"> 
                    
                    <i id="togglePassword" class="fa-solid fa-eye-slash toggle-icon" style="font-size: 14px;"></i>
				</div>
				<div style="text-align: right; margin-top: 8px;">
					<a href="../forgotPassword.jsp"
						style="color: grey; font-size: 12px; text-decoration: none; font-weight: 600;">
						Forgot Password? </a>
				</div>
				<div id="errorMessage" style="display: none; color: red; font-size: 12px; margin-top: 5px; margin-bottom: 10px; text-align: left;">
                    Incorrect email or password.
                </div>

				<button type="submit" class="login-button" style="margin-top: 20px;">Log In</button>
			</form>

			<a href="registerGuardian.jsp" class="register-link">Register new account</a>
		</div>

	</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // 1. NEW: Check URL for ?error=1
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('error') === '1') {
                const emailInput = document.getElementById('email');
                const passwordInput = document.getElementById('password');
                const errorDiv = document.getElementById('errorMessage');

                // Turn Email Border Red
                if (emailInput) {
                    emailInput.style.border = "1px solid red";
                }

                // Turn Password Border Red
                if (passwordInput) {
                    passwordInput.style.border = "1px solid red";
                }
                
                // Show Error Message
                if (errorDiv) {
                    errorDiv.style.display = "block";
                }
            }

            // 2. EXISTING: Eye Mask Logic
            const togglePassword = document.querySelector('#togglePassword');
            const password = document.querySelector('#password');

            if (togglePassword && password) {
                togglePassword.addEventListener('click', function (e) {
                    // Toggle the type attribute
                    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                    password.setAttribute('type', type);

                    // Toggle the eye icon
                    if (type === 'text') {
                        this.classList.remove('fa-eye-slash');
                        this.classList.add('fa-eye');
                    } else {
                        this.classList.remove('fa-eye');
                        this.classList.add('fa-eye-slash');
                    }
                });
            }
        });
    </script>

</body>

</html>